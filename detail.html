<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COVID-19 患者詳細情報</title>
    <link rel="stylesheet" href="detail.css">
</head>
<body>
    <div id="detail-container">
        <h1>患者詳細情報</h1>
        <div id="patient-detail">
            <div class="detail-item">
                <strong>名前:</strong> <span id="detail-name"></span>
            </div>
            <div class="detail-item">
                <strong>年齢:</strong> <span id="detail-age"></span>
            </div>
            <div class="detail-item">
                <strong>既往歴:</strong> <span id="detail-conditions"></span>
            </div>
            <div class="detail-item">
                <strong>症状:</strong> <span id="detail-symptoms"></span>
            </div>
            <div class="detail-item">
                <strong>重症度:</strong> <span id="detail-severity"></span>
            </div>
            <div class="detail-item">
                <strong>検査結果:</strong> <span id="detail-tested"></span>
            </div>
        </div>
        <button onclick="goBack()" class="back-button">戻る</button>
    </div>
    <script>
        // URLパラメータから患者データを取得
        const urlParams = new URLSearchParams(window.location.search);
        const name = urlParams.get('name');
        const age = urlParams.get('age');
        const conditions = urlParams.get('conditions').split(',');
        const symptoms = urlParams.get('symptoms').split(',');
        const severity = urlParams.get('severity');
        const tested = urlParams.get('tested');

        // 英語の症状コードを日本語に変換するマッピング
        const symptomTranslation = {
            fever: "発熱",
            cough: "咳",
            difficulty_breathing: "呼吸困難",
            fatigue: "倦怠感",
            chest_pain: "胸痛"
        };

        // 症状を日本語に変換
        const translatedSymptoms = symptoms.map(symptom => symptomTranslation[symptom] || symptom);

        // 画面にデータを表示
        document.getElementById('detail-name').textContent = name;
        document.getElementById('detail-age').textContent = age;
        document.getElementById('detail-conditions').textContent = conditions.join(', ');
        document.getElementById('detail-symptoms').textContent = translatedSymptoms.join(', ');
        document.getElementById('detail-severity').textContent = severity;
        document.getElementById('detail-tested').textContent = 
            tested === 'not_tested' ? '未検査' : (tested === 'tested_positive' ? '陽性' : '陰性');

        // 戻るボタンの動作
        function goBack() {
            window.history.back();
        }
    </script>
</body>
</html>